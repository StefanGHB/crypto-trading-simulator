<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
<!-- Loading Overlay -->
<div id="loading-overlay" class="loading-overlay">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <div class="loading-text">Initializing Trading Platform...</div>
    </div>
</div>

<!-- Main Application Container -->
<div id="app" class="app-container">
    <!-- Header Section -->
    <header class="header">
        <div class="header-content">
            <!-- Brand Section -->
            <div class="brand-section">
                <div class="brand-logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect x="2" y="2" width="28" height="28" rx="6" fill="url(#gradient)" stroke="#00f5ff" stroke-width="1"/>
                        <path d="M8 16L12 12L16 16L20 12L24 16" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00f5ff;stop-opacity:0.2" />
                                <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:0.2" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div class="brand-text">
                    <h1 class="brand-title">CryptoTrade Pro</h1>
                    <div class="demo-badge">DEMO MODE</div>
                </div>
            </div>

            <!-- User Info Section -->
            <div class="user-info">
                <div class="balance-section">
                    <div class="balance-label">Available Balance</div>
                    <div id="user-balance" class="balance-amount">$0.00</div>
                </div>
                <div class="header-actions">
                    <button id="reset-account-btn" class="btn btn-reset">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                        Reset Account
                    </button>
                    <button id="reconnect-btn" class="btn btn-secondary btn-sm" style="display: none;">
                        <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                        Reconnect
                    </button>
                </div>
            </div>
        </div>

        <!-- Connection Status Indicator -->
        <div id="connection-status" class="connection-status">
            <div class="status-indicator"></div>
            <span class="status-text">Connecting...</span>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <!-- Market Overview Section -->
        <section class="market-section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
                    </svg>
                    Top 20 Cryptocurrencies
                </h2>
                <div class="market-status">
                    <div id="last-update" class="last-update">Last updated: --</div>
                </div>
            </div>

            <!-- üñ•Ô∏è DESKTOP TABLE (1024px+) -->
            <div class="crypto-table-container desktop-only">
                <table id="crypto-table" class="crypto-table">
                    <thead>
                    <tr>
                        <th class="col-rank">#</th>
                        <th class="col-name">Name</th>
                        <th class="col-price">Price</th>
                        <th class="col-change">Price Change</th>
                        <th class="col-actions">Actions</th>
                    </tr>
                    </thead>
                    <tbody id="crypto-table-body">
                    <!-- Crypto rows will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>

            <!-- üì± MOBILE & TABLET CARDS (below 1024px) -->
            <div id="crypto-grid" class="crypto-grid mobile-only tablet-only">
                <!-- Crypto cards will be dynamically inserted here -->
            </div>

            <!-- Loading State for Table -->
            <div id="crypto-table-loading" class="table-loading">
                <div class="loading-skeleton">
                    <div class="skeleton-row" data-repeat="20">
                        <div class="skeleton-cell skeleton-rank"></div>
                        <div class="skeleton-cell skeleton-name"></div>
                        <div class="skeleton-cell skeleton-price"></div>
                        <div class="skeleton-cell skeleton-change"></div>
                        <div class="skeleton-cell skeleton-actions"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Transaction History Section -->
        <section class="history-section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                    </svg>
                    Transaction History
                </h2>
                <div class="history-controls">
                    <button id="refresh-history-btn" class="btn btn-secondary btn-sm">
                        <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg>
                        Refresh
                    </button>
                </div>
            </div>

            <div class="transaction-list-container">
                <div id="transaction-list" class="transaction-list">
                    <!-- Transaction items will be dynamically inserted here -->
                </div>

                <!-- üî• ENHANCED Empty State with HOLOGRAPHIC BACKGROUND -->
                <div id="empty-history" class="empty-state" style="display: none;">
                    <!-- üåü Crypto Rain Matrix - ULTRA ENHANCED -->
                    <div class="empty-state-crypto-rain">
                        <div class="crypto-symbol">‚Çø</div>
                        <div class="crypto-symbol">Œû</div>
                        <div class="crypto-symbol">‚Ç≥</div>
                        <div class="crypto-symbol">‚óà</div>
                        <div class="crypto-symbol">‚Çø</div>
                        <div class="crypto-symbol">Œû</div>
                        <div class="crypto-symbol">‚óä</div>
                        <div class="crypto-symbol">‚Ç≥</div>
                        <div class="crypto-symbol">‚Çø</div>
                        <div class="crypto-symbol">‚óà</div>
                        <div class="crypto-symbol">‚óä</div>
                        <div class="crypto-symbol">Œû</div>
                        <div class="crypto-symbol">‚Ç≥</div>
                        <div class="crypto-symbol">≈Å</div>
                        <div class="crypto-symbol">‚óé</div>
                        <div class="crypto-symbol">‚¨£</div>
                        <div class="crypto-symbol">‚óâ</div>
                    </div>

                    <!-- ‚ö° Holographic Trading Indicators - ULTRA MODERN -->
                    <div class="empty-state-indicators">
                        <div class="trading-indicator">‚¨¢</div>  <!-- Hexagon - blockchain tech -->
                        <div class="trading-indicator">‚àÜ</div>  <!-- Delta - mathematical change -->
                        <div class="trading-indicator">‚àá</div>  <!-- Nabla - gradient/trend -->
                        <div class="trading-indicator">‚óÜ</div>  <!-- Diamond - value/precious -->
                        <div class="trading-indicator">‚àû</div>  <!-- Infinity - endless potential -->
                    </div>

                    <!-- üíé Floating Data Points -->
                    <div class="empty-state-data-points">
                        <div class="data-point"></div>
                        <div class="data-point"></div>
                        <div class="data-point"></div>
                        <div class="data-point"></div>
                        <div class="data-point"></div>
                        <div class="data-point"></div>
                    </div>

                    <!-- üéØ Center Content (UNCHANGED) -->
                    <div class="empty-icon">
                        <svg width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M5 6.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                    </div>
                    <h3>No transactions yet</h3>
                    <p>Start trading to see your transaction history here</p>
                </div>

                <!-- Loading State for History -->
                <div id="history-loading" class="history-loading">
                    <div class="loading-skeleton">
                        <div class="skeleton-transaction" data-repeat="5">
                            <div class="skeleton-circle"></div>
                            <div class="skeleton-content">
                                <div class="skeleton-line skeleton-primary"></div>
                                <div class="skeleton-line skeleton-secondary"></div>
                            </div>
                            <div class="skeleton-amount"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Trading Modal -->
<div id="trading-modal" class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <h3 id="modal-title" class="modal-title">Trade Cryptocurrency</h3>
            <button id="close-modal-btn" class="modal-close">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                </svg>
            </button>
        </div>

        <div class="modal-body">
            <!-- Crypto Info -->
            <div class="crypto-info">
                <div class="crypto-avatar">
                    <span id="crypto-symbol-avatar" class="crypto-symbol">BTC</span>
                </div>
                <div class="crypto-details">
                    <div id="crypto-name" class="crypto-name">Bitcoin</div>
                    <div id="crypto-price" class="crypto-current-price">$43,250.00</div>
                </div>
            </div>

            <!-- Trade Type Tabs -->
            <div class="trade-tabs">
                <button id="buy-tab" class="trade-tab active" data-type="buy">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                    Buy
                </button>
                <button id="sell-tab" class="trade-tab" data-type="sell">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
                    </svg>
                    Sell
                </button>
            </div>

            <!-- Trade Form -->
            <form id="trade-form" class="trade-form">
                <div class="form-group">
                    <label for="amount-input" class="form-label">
                        <span id="amount-label">Amount (USD)</span>
                        <span id="available-balance" class="available-amount">Available: $0.00</span>
                    </label>
                    <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input type="number" id="amount-input" class="form-input" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <div id="amount-error" class="form-error"></div>
                </div>

                <div class="form-group">
                    <div class="trade-preview">
                        <div class="preview-row">
                            <span>You will get:</span>
                            <span id="preview-quantity" class="preview-value">0.00 BTC</span>
                        </div>
                        <div class="preview-row">
                            <span>Fee:</span>
                            <span id="preview-fee" class="preview-value">$0.00</span>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="submit" id="execute-trade-btn" class="btn btn-primary" disabled>
                        <span class="btn-text">Execute Trade</span>
                        <div class="btn-loader" style="display: none;">
                            <div class="spinner-mini"></div>
                        </div>
                    </button>
                    <button type="button" id="cancel-trade-btn" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Notification Toast Container -->
<div id="toast-container" class="toast-container">
    <!-- Toast notifications will be dynamically inserted here -->
</div>

<!-- Confirmation Modal -->
<div id="confirmation-modal" class="modal-overlay">
    <div class="modal-container modal-sm">
        <div class="modal-header">
            <h3 id="confirm-title" class="modal-title">Confirm Action</h3>
        </div>
        <div class="modal-body">
            <p id="confirm-message" class="confirm-text">Are you sure you want to proceed?</p>
        </div>
        <div class="modal-actions">
            <button id="confirm-cancel-btn" class="btn btn-secondary">Cancel</button>
            <button id="confirm-ok-btn" class="btn btn-danger">Confirm</button>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="frontend/app.js"></script>
</body>
</html>